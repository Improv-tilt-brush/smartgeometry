
FloatList inputStroke = new FloatList(
  -4, 0, 1, 0, 0,-15, 9, 1, 0, 0,-10, 17, 1, 0, 0,-1, 28, 1, 0, 0,14, 13, 1, 0, 0,12, 4, 1, 0, 0,22, 1, 1, 0, 0,14, -11, 1, 0, 0,5, -12, 1, 0, 0,2, -19, 1, 0, 0,-12, -23, 1, 0, 0,-13, -7, 1, 0, 0,-14, -1, 0, 1, 0
);

FloatList prediction = new FloatList(
  // good one (screenshots first)
  //-17.864302585991393,20.595817124959343,1,0,0,-10.37854589600954,-0.002269803930296877,1,0,0,-6.5041381790157144,2.063006940416965,1,0,0,-4.8961328226484735,2.82409213172939,1,0,0,-10.342868600832862,3.6054106867337086,1,0,0,6.588494290983084,4.452809804264114,1,0,0,7.144532941053767,1.9524082633385087,1,0,0,7.628578452258638,4.530035131965181,1,0,0,6.857268916884597,5.950197241581121,0,1,0,14.335839093907857,21.754134053270164,1,0,0,-4.571684396247875,5.81797014354429,1,0,0,-4.834861404651679,16.95865495841971,1,0,0,-1.284246122439011,11.164542267565297,1,0,0,0.7468624715928391,17.69995517150545,1,0,0,2.8085355981659843,7.751517850578618,1,0,0,9.92084247827268,11.475492222001495,1,0,0,18.824686024554126,12.035880716948117,1,0,0,11.84775439229727,2.98430933205029,1,0,0,14.030548419743864,0.9633792557105422,1,0,0,12.371966738628705,0.0011784601275299101,1,0,0,15.056001265085825,-3.4331116168617273,1,0,0,13.647551992588706,-6.5955810516090265,1,0,0,11.438772379685123,-8.949490104438746,1,0,0,6.7111731290618915,-7.480393733777684,1,0,0,3.735085377155771,-6.668860529942745,1,0,0,3.8404272318958674,-17.16255977858434,1,0,0,-0.5388794471314005,-8.261789110867241,1,0,0,-1.617334963884734,-6.5295971319646435,1,0,0,-4.733278485281355,-8.162523119561204,1,0,0,-3.6378194748142185,-3.846931057346487,1,0,0,-7.313362756093825,-4.9939979565162655,1,0,0,-13.992456623371528,-6.49546523251959,1,0,0,-13.613174455006728,-3.666139060582666,1,0,0,-16.40506781702681,0.00012102399275770217,1,0,0,-3.542017675813464,0.942567909922762,0,1,0,0.1135041331783299,12.60055194316948,1,0,0,7.8662123808688245,-2.085239772811391,1,0,0,6.591905754194519,-0.5695285507691639,1,0,0,14.137222833080932,-0.8310682225527586,1,0,0,11.207512032232374,0.7330658280688817,1,0,0,12.180208492045091,4.858837224822701,1,0,0,5.019647561185874,3.7191400392752225,1,0,0,3.6260676566599206,4.7445313404458,1,0,0,3.3214190099439747,10.251268882266583,1,0,0,0.8350106462509163,5.810061093919562,1,0,0,-0.34071689995470433,4.882623014791497,1,0,0,-1.989892948422202,4.237392446605986,1,0,0,-7.400890986162603,6.494893454504642,1,0,0,-12.39911374643378,4.699112053489912,1,0,0,-9.068105908078222,1.7413580401312965,1,0,0,-5.873407593797399,-0.0004416748482334205,1,0,0,-4.722080792062714,-1.3071282550507384,1,0,0,-7.98536934329906,-6.142304101417498,1,0,0,-6.197383170394507,-6.183983192117496,1,0,0,-4.240704350842677,-7.481113161742572,1,0,0,-2.5004036500756306,-6.765721736138603,0,1,0,-20.134514702294833,51.87081781433526,1,0,0,-0.07231007552324742,5.028938492571362,1,0,0,3.8107195015708695,19.46939626730352,1,0,0,1.3981251630328988,13.246900337621803,1,0,0,0.10038626383716365,7.422073722237138,1,0,0,-17.973743325887874,6.175636353501617,0,1,0,15.666984400969357,-10.216773068035577,1,0,0,0.6699905390757703,5.08527978549588,1,0,0,-1.2632624377117034,6.88337983516239,0,1,0,4.2921945384720415,-13.625050365463323,1,0,0,4.872413373401571,4.546542479766854,1,0,0,2.2428745524435754,-0.0008975667899414418,0,1,0,36.706854037078905,-42.57890477802946,1,0,0,-0.2545495489194371,5.526873053991268,1,0,0,0.11948412791581492,32.37761719160628,1,0,0,-2.11374864586812,4.14739800265142,1,0,0,-6.650058588751642,4.1714761020094215,1,0,0,-5.781314955462783,5.91264033010178,1,0,0,-2.6001809628290027,4.869065719050659,1,0,0,0.7193433373821622,4.942201385195641,0,1,0,16.305072269633524,-18.490087633161902,1,0,0,0.6017006358428428,6.429643123651635,1,0,0,-0.8148238334488545,10.376892841834593,0,1,0,3.4493748637259034,-20.522673634259085,1,0,0,15.693148718226269,8.597595409890884,1,0,0,4.378478915323643,1.2995036193949536,1,0,0,1.798406213563712,1.6523995501140354,0,1,0,-95.16255444856205,-158.54902736847677,0,0,1
  // 2
  //-28.448785880924117,24.148449791734695,1,0,0,-11.675786120083096,2.7420331139001526,1,0,0,-20.34389722969792,4.101319007134871,1,0,0,8.456995434573688,5.204093133399632,1,0,0,22.023383666617168,2.6656420805350716,1,0,0,5.500933300412688,1.817092378363991,1,0,0,4.694099475794531,0.0015540272582108784,0,1,0,39.93998779635313,19.099086530922367,1,0,0,3.7914332071467722,0.012430162244821935,1,0,0,10.442630771507188,1.1634687375633612,1,0,0,6.66327887778285,1.6816345906339907,1,0,0,15.402430240380196,8.658612467591304,1,0,0,20.01827120386103,4.726906905953212,1,0,0,32.633582216024,5.489962232681581,1,0,0,17.145760714941254,0.0005926354526960507,1,0,0,19.43405783334085,0.33192177612387913,1,0,0,6.021870927557468,-1.8306371843742923,1,0,0,8.894079016183179,-5.5009491491167495,1,0,0,7.126886086267995,-10.109979101631476,1,0,0,2.6240498679784374,-6.074370603496336,1,0,0,3.6840111757976906,-13.43953910307374,1,0,0,0.40397035359353944,-5.2170802076845995,1,0,0,1.2802557914801749,14.31953655016895,1,0,0,1.339499013132515,25.896406810071205,1,0,0,-2.818452922742918,20.70114901821841,1,0,0,-3.463969035887387,9.032061137896454,1,0,0,-7.394136737314298,12.71833511875752,1,0,0,-5.386433208318534,6.556967394080599,1,0,0,-7.347428928733681,5.933707800235698,1,0,0,-19.420397107025472,8.94407577390119,1,0,0,-14.598033785331326,4.144914318439342,1,0,0,-16.127607042287945,1.936819838069551,1,0,0,-25.745767368154386,-0.0006204119369451221,1,0,0,-19.703684627675965,-5.810882569844509,1,0,0,-18.434144442256773,-9.119765390038067,1,0,0,-6.808793826016996,-4.948375228960278,1,0,0,-14.92478035648485,-7.724754374037082,1,0,0,-13.145707497957735,-12.208634267951316,1,0,0,-8.257344212477669,-10.83483459236776,1,0,0,-6.642930515065148,-17.823492154129056,1,0,0,-1.2669400082345645,-7.003805498411351,1,0,0,0.488086437663734,-3.074847474545541,1,0,0,5.11988812451223,-4.890559558626896,1,0,0,9.94338126144993,-3.3081672548032834,0,1,0,33.595420493539976,-0.008609865295571438,1,0,0,-2.849229065833879,-0.0021698531473537844,1,0,0,-6.524130511836854,3.2739549778761923,1,0,0,-6.4147348957631,9.77865863147149,1,0,0,-0.9269487397412108,9.002997746235545,1,0,0,0.7673868852982882,5.674496777817417,1,0,0,6.368056592457158,10.201458213118045,1,0,0,7.73496768770997,5.5186211902786395,1,0,0,14.902887198528777,7.595566428940221,1,0,0,11.013688188685967,2.661666512115979,1,0,0,8.370300185621991,1.1526877205623411,1,0,0,16.405019337451325,0.000030124588516182773,1,0,0,19.43725744342282,-5.087687031273247,1,0,0,9.225760033435998,-4.34939576295002,1,0,0,4.686333625964428,-3.756980681219637,1,0,0,3.2576536994666503,-9.016703061621978,1,0,0,0.09422653567828805,-5.646423874916727,1,0,0,-1.2734664613250686,-3.970982559980213,1,0,0,-4.544211500767456,-5.2450805833798455,1,0,0,-11.656323102515664,-8.025092358234852,0,1,0,-97.13747675650858,-45.353872714064394,1,0,0,2.3202153765754083,1.8993662678123846,0,1,0,42.95538065320162,113.89712859651921,1,0,0,-1.458716424641261,18.322258375503644,1,0,0,-5.967449379259078,14.462565764832016,1,0,0,-9.098584058701158,1.9849867330012243,1,0,0,-8.408848888823341,-0.906309913682482,1,0,0,-13.647251564561152,0.6258945186055105,1,0,0,-7.876840357279653,2.0349707069962863,0,1,0,43.48487938713387,-4.650248164081603,1,0,0,-3.2049920829872027,1.188347470834194,1,0,0,-7.2722901602964445,8.80163880045617,1,0,0,-3.4587616690611807,6.302883147213577,1,0,0,-0.7414007916661195,4.331501232448249,0,1,0,17.592082468617935,-21.29655250246064,1,0,0,1.285172667408095,9.999936087325844,1,0,0,2.9230065220422707,8.49529945393523,1,0,0,1.9233501773269155,3.4078761909206694,1,0,0,4.142672282482664,2.5302127746742884,0,1,0,43.54608163286996,-55.58962694692204,0,0,1
  // 3
  -24.929931199163473,23.431054874661132,1,0,0,-23.30886914051702,-0.0022819808586281836,1,0,0,-13.200382796977953,2.746954071673021,1,0,0,-6.582642507603272,3.5169661268353365,1,0,0,4.600623065048338,2.5927969443055834,1,0,0,12.192417885364614,2.578729093054995,1,0,0,25.979105938375458,3.9759961997964104,1,0,0,2.829524213572507,2.771907965940756,0,1,0,45.61118694169856,-21.817013195236612,1,0,0,2.8127618140434576,-0.1691985620586863,1,0,0,7.392571843985191,2.1296873237097635,0,1,0,-20.383814076868628,1.8235294624033196,1,0,0,0.8074918474195932,-0.0010465873509936353,0,1,0,-3.791839134813751,43.87856859611467,1,0,0,-0.00478061730703752,14.171715181249933,1,0,0,7.836728061268309,34.26980942594908,1,0,0,13.756494102596282,27.153105778403482,1,0,0,7.506099578806299,8.271779062705978,1,0,0,10.57800589792065,6.8280584697975275,1,0,0,18.532443851161478,7.418912631633201,1,0,0,11.701456184086213,2.5388622174280067,1,0,0,15.663460108629984,1.0090353306741284,1,0,0,11.977861006988796,-1.5459151083082758,1,0,0,15.971437035287435,-7.966926880191984,1,0,0,11.292424362910955,-9.083778205862684,1,0,0,9.643930882797264,-15.42103644204635,1,0,0,9.124507789252727,-39.72808119987117,1,0,0,-1.0497227135816751,-13.002493752388881,1,0,0,-11.848215842498387,-22.101342705848477,1,0,0,-6.781215319066367,-6.658593446020784,1,0,0,-32.489333185881,-15.264532314160508,1,0,0,-10.785015561634335,-2.8172081243125633,1,0,0,-18.950613207227278,-2.271159132386524,1,0,0,-12.926858158061412,-0.0004461852939178138,1,0,0,-14.299140673165452,8.02714554953861,0,1,0,16.998227177812222,111.47050748000345,1,0,0,-2.6792819564740986,11.744471705328346,1,0,0,-6.126462274788436,16.41966174145102,1,0,0,-6.844623370814208,11.908456187868088,1,0,0,-1.4252284654950012,3.945800814598484,1,0,0,-2.6043238309301597,19.562964046805114,1,0,0,-2.0502776931913522,-0.0015581283649472452,0,1,0,55.076332455812874,-49.23095259974886,1,0,0,-5.624702088364068,43.10449460005942,1,0,0,-0.7748259553412546,1.2942608616525353,0,1,0,-31.980600192766822,-146.0248704998274,1,0,0,10.949223060232534,-3.568872778450337,1,0,0,14.709572684322803,-7.660328488085901,1,0,0,27.889685332173215,-24.208165994728624,1,0,0,21.274943433872824,-19.73944601012848,1,0,0,6.4674648852979555,-4.618246026008014,1,0,0,5.868244229998321,-1.8169864305133272,1,0,0,11.459381826173704,0.9059716541470934,1,0,0,5.312127131406813,3.004110170943778,1,0,0,5.517381548538757,7.055632275238586,1,0,0,4.328599791974518,12.7553886536345,1,0,0,1.5300315185356512,12.90496119046328,1,0,0,-1.4565809155889764,20.810399985918544,1,0,0,-2.076322059408739,7.025538472321716,1,0,0,-8.80816303360947,14.067325045690971,1,0,0,-12.869743888953233,10.335944913369664,1,0,0,-19.90830430431991,9.298976243926822,1,0,0,-7.924989252602495,-0.0620458362990466,1,0,0,-12.527066281540373,2.0204911867560185,1,0,0,-9.876517144821582,0.0001277224172578536,1,0,0,-14.465884033871307,-5.146817687709907,1,0,0,-5.94107968089906,-1.0367644608714583,1,0,0,-4.2788344538695355,-2.3619432514550174,1,0,0,-2.9511592810981435,-5.171756095785322,1,0,0,-1.0602491410856305,-5.281301497674366,1,0,0,0.16889820532084546,-5.551671630386601,1,0,0,2.818721625104663,-4.20757443508358,0,1,0,-54.20874623295808,33.401492105905646,1,0,0,6.776624079652273,4.138730923880134,1,0,0,10.670890611013744,2.563010659681459,0,1,0,2.678185952788916,-13.274298597964043,0,0,1
);

float[] model_prev_pen = new float[3];
float model_x;
float model_y;

void setup() {
  size(300,600);
  pixelDensity(displayDensity());
  background(255);
  
  model_x = 100;
  model_y = 100;
 
  drawStrokes(inputStroke);
  drawStrokes(prediction);
}

float alpha = 0;

void drawStrokes(FloatList strokes) {
  
  alpha = 0;
  
  for(int i = 0; i < strokes.size()/5; i++) {
    
    alpha += 2.0/(strokes.size()/5);
    color c = color(255,255*alpha/2,255-0.5*alpha*255,255);
    stroke(c);
    fill(c);
    
    float model_dx = strokes.get(5*i);
    float model_dy = strokes.get(5*i+1);  
    float model_pen_down = strokes.get(5*i+2);
    float model_pen_up = strokes.get(5*i+3);
    float model_pen_end = strokes.get(5*i+4);
      
    // Not needed since we are iteration on points (not on the model)
    if(model_prev_pen[2] == 1) {
      break;
    }
    
    if(model_prev_pen[0] == 1) {
      line(model_x, model_y, model_x + model_dx, model_y + model_dy);

    }
    
    model_x += model_dx;
    model_y += model_dy;
    
    model_prev_pen[0] = model_pen_down;
    model_prev_pen[1] = model_pen_up;
    model_prev_pen[2] = model_pen_end;
    
  }
  
}

void draw() {
 
  
}